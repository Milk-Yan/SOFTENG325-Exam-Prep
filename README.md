# Exam Prep
This is a list of libraries that could help in the exam :D good luck!

## Jackson
The jackson package has some helpers to generate json based on Jackson 
annotations. You can put the code supplied in the jackson.domain package,
whatever data needs to be added can be added to those domains in Main. 

Steps:
1. Add classes to domain package as specified by "client"
2. Create data to serialize in Main.
3. You could add annotations to the domain packages first, or
run Main and see what happens. If successful, the JSON will be printed out.

<h5>Common annotations to use:</h5>

- @JsonGetter ("customPropertyName"): Customize property names. Use on getter.
- @JsonSetter ("customPropertyName"): Customize property names. Use on setter.
- @JsonIgnore: Ignore this property. Can use on field or getter or setter, 
does not make a difference. Recommend on field personally because it's clear :)
- @JsonSerialize (using = CustomSerializer.class): Implementation of StdSerializer to appropriately
handle properties that aren't JavaBeans. An example is [LocalDateSerializer](src/jackson/util/LocalDateSerializer.java).
- @JsonDeserialize (using = CustomDeserializer.class): Implementation of StdDeserializer to appropriately
handle properties that aren't JavaBeans. An example is [LocalDateDeserializer](src/jackson/util/LocalDateDeserializer.java).
- @JsonDeserialize (keyUsing = CustomKeyDeserializer.class): An example of using this for a map key is [CourseDeserializer](src/jackson/util/CourseDeserializer.java). For maps, need to 
override toString() of the key class too.
- @JsonIdentityInfo (generator = ObjectIdGenerators.PropertyGenerator.class,
property = "uniqueProperty") : Specify a unique property of the object. The object is only
completely marshalled the first time, later times only this unique property will be written out. Example
in [Course](src/jackson/domain/Course.java).
- @JsonTypeInfo (use = JsonTypeInfo.Id.CLASS, property = "childType"): Supply Java class names to ensure type information is marshalled. Used 
when we marshall the parent class in polymorphism to find the child class the object belongs to. The property is what the
type name will be stored as in the JSON. Gives full name, e.g. jackson.domain.Course.
- @JsonTypeInfo (use = JsonTypeInfo.Id.NAME, property = "childType") and
@JsonSubTypes (value = childClass.class, name = "childName"): Used in conjunction. We
can manually specify the child names that are used in this case, so we can marshall Course instead of
jackson.domain.Course. Need to do this for every new child class.

## JPA and ORM (Hibernate)
The [jpa](src/jpa) package helps to visualize the tables generated by the domain classes
as specified by JPA annotations.

Steps:
1. Add classes to domain package as specified by "client"
2. Add any annotations you would like to the domain classes.
3. Run the main class, [JPA](src/jpa/JPA.java). You will see the created tables
printed out by Hibernate.

<h5>Common annotations used:</h5>

- @Entity: This is a table in the relational database. Has a primary key.
- @Id: Tags unique primary key of an entity.
- @GeneratedValue: Let the database automatically make and assign this value.
- @Embeddable: Signals value-type. Usually doesn't have a table of its own.
- @ElementCollection: A collection of objections.
- @CollectionTable (name = "tableName", joinColumns = @JoinColumn(name = "columnName")): Specifies the table that is used 
for the mapping of collections of basic or embeddable types. Applied to the collection-valued field or property. 
- @AttributeOverride (name = "propertyToOverride", column = @Column(name = "newName")): Used to override property. 
- @Transient: Property not mapped (ignored).
- @Enumerated: Property is mapped to column with value as the enum's string representation.
- @Temporal (TemporalType.typeToDefine): Defines precision of date/time property.
- And many more like @OneToMany, @ManyToMany, etc that are self-explanatory.

## JAX-RS
The variations of the client and server implementations are too high and there's not much point 
doing them now, but here are some guidelines anyway.

<h5>Application Class</h5>

A class that extends Application, which is a base class for all JAX-RS applications.
Has:
- @ApplicationPath ("/services"): Relative path to access resources. This would be 
http://server:port/war_name/services.
- Set of singletons of all the resource classes. We add to this in the constructor.

<h5>Resource Class</h5>

A resource class with methods that process service requests. Has:
- @Path("/resourceName"): Relative to the service class if put above the class, e.g.
http://server:port/war_name/services/resourceName OR relative
to the resource if put above the method, e.g. http://server:port/war_name/services/resourceName/method
- @GET: This method handles HTTP GET requests
- @Produces (contentType): Determines the type of content the method will produce.
- @Consumes (contentType): Determines the type of content the method will consume. e.g. MediaType.APPLICATION_JSON
- @DefaultValue ("value"): If this query parameter isn't supplied, then this is used as the default value.
- @QueryParam ("param"): This query parameter is supplied with the HTTP request, e.g. ../method?param=someValue
- Response return that can have different response HTTP status codes. 

<h5>HTTP Status Codes (common)</h5>

- 200: OK.
- 201: Created.
- 204: No content.
- 400: Bad Request. (Server will not process request, normally missing data)
- 401: Unauthorized. (user is not authorized to do this)
- 403: Forbidden. (server refuses to do this, normally not logged in)
- 404: Not found.

<h5>Common REST endpoints</h5>

<i> Note that 5xx status codes are not considered since they are errors with the server that
could just occur at any time, not necessarily related to the request.</i>

| CRUD Operation                              | HTTP method | Resource (URI Path) | Query params                                            | HTTP Response Codes                                                                                                                                                                                                   | HTTP Request Payload         | HTTP Response Payload                       | Other Response Data (e.g. cookies)                             |
|---------------------------------------------|-------------|---------------------|---------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|---------------------------------------------|----------------------------------------------------------------|
| Create                                      | POST        |                     |                                                         | Success: 201 Created. Failure: 400 Bad Request.                                                                                                                                                                       | information to create object | Link to new object                          |                                                                |
| Retrieve                                    | GET         |                     | - Cookie - parameters that can be both optional and not | Success: 200 OK. Failure:  400 Bad Request (if there are non-optional parameters) 401 Unauthorized (if authorization required) 403 Forbidden (if authorization required) 404 Not found (if looking for specific item) |                              | The items we are looking for. May be empty. | - Next and Previous links (if only part of the data retrieved) |
| Update (Modifying something already there)  | PUT         |                     | - Cookie - parameters that can be both optional and not | Success: 200 OK. or 204 No Content. Failure: 400 Bad Request (if there are non-optional parameters) 401 Unauthorized. 403 Forbidden (if using cookie)                                                                 | Information to modify.       |                                             |                                                                |
| Update (Logging in, creating something new) | POST        |                     | - Cookie - parameters that can be both optional and not | Success: 200 OK or 204 No Content. Failure: 400 Bad Request (if there are non-optional parameters) 401 Unauthorized. 403 Forbidden (if using cookie)                                                                  | - username and password      |                                             | - cookie                                                       |
| Delete                                      | DELETE      |                     | - Cookie                                                | Success: 204 No Content. Failure: 401 Unauthorized. 403 Forbidden.                                                                                                                                                    |                              |                                             |                                                                |

